<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>图片主题色提取算法小结 —— Shared in Huaban.com</title>
    <meta name="description" content="">
    <meta name="author" content="XadillaX">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/default.css" id="theme">

    <script src="http://libs.useso.com/js/jquery/2.1.1/jquery.min.js"></script>

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
        if (window.location.search.match(/print-pdf/gi))
        {
            var link = document.createElement('link');
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = 'css/print/pdf.css';
            document.getElementsByTagName('head')[0].appendChild(link);
        }
    </script>

    <!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <section>
                <h1>Theme Color Extracting</h1>
                <h3>By Using Interesting Algorithm</h3>
                <p>
                    <small>Created by <a href="http://xcoder.in/">XadillaX</a> / <a href="https://github.com/XadillaX">@XadillaX</a></small>
                </p>
            </section>

            <section>
                <section>
                    <h2>What's Theme Color ♫</h2>
                </section>

                <style>
                    .reveal ul.color-chips {
                        padding: 0;
                        margin: 0;
                        list-style: none;
                        list-style-type: none;
                        font-size: 12px;
                    }
                    .color-chips li {
                        margin: 0px;
                        font-family: "Fantasque Sans Mono", "Monaco", "Monospace";
                        list-style: none;
                        float: left;
                    }
                    .color-chips li a:not(.image) {
                        padding: 7px;
                        color: #FFFFFF;
                    }
                </style>


                <section>
                    <img src="assets/1.jpg" />
                    <br />
                    <ul class="color-chips">
                        <li class="color">
                            <a href="/colors/FFFFFF" style="background-color: #FFFFFF" title="#FFFFFF">#FFFFFF</a>
                        </li>
                        <li class="color">
                            <a href="/colors/1B1C30" style="background-color: #1B1C30" title="#1B1C30">#1B1C30</a>
                        </li>
                        <li class="color">
                            <a href="/colors/E8AF4A" style="background-color: #E8AF4A" title="#E8AF4A">#E8AF4A</a>
                        </li>
                        <li class="color">
                            <a href="/colors/F4DC91" style="background-color: #F4DC91" title="#F4DC91">#F4DC91</a>
                        </li>
                        <li class="color">
                            <a href="/colors/D53E2B" style="background-color: #D53E2B" title="#D53E2B">#D53E2B</a>
                        </li>
                        <li class="color">
                            <a href="/colors/555654" style="background-color: #555654" title="#555654">#555654</a>
                        </li>
                        <li class="color">
                            <a href="/colors/BCCCA0" style="background-color: #BCCCA0" title="#BCCCA0">#BCCCA0</a>
                        </li>
                        <li class="color">
                            <a href="/colors/3D9370" style="background-color: #3D9370" title="#3D9370">#3D9370</a>
                        </li>
                    </ul>
                </section>

                <section>
                    <img src="assets/2.jpg" />
                    <br />
                    <ul class="color-chips">
                        <li class="color">
                            <a href="/colors/FEEAE2" style="background-color: #FEEAE2" title="#FEEAE2">#FEEAE2</a>
                        </li>
                        <li class="color">
                            <a href="/colors/F2A28A" style="background-color: #F2A28A" title="#F2A28A">#F2A28A</a>
                        </li>
                        <li class="color">
                            <a href="/colors/FAD0BA" style="background-color: #FAD0BA" title="#FAD0BA">#FAD0BA</a>
                        </li>
                        <li class="color">
                            <a href="/colors/C92D5C" style="background-color: #C92D5C" title="#C92D5C">#C92D5C</a>
                        </li>
                        <li class="color">
                            <a href="/colors/683D4A" style="background-color: #683D4A" title="#683D4A">#683D4A</a>
                        </li>
                        <li class="color">
                            <a href="/colors/5F3743" style="background-color: #5F3743" title="#5F3743">#5F3743</a>
                        </li>
                        <li class="color">
                            <a href="/colors/D8867B" style="background-color: #D8867B" title="#D8867B">#D8867B</a>
                        </li>
                        <li class="color">
                            <a href="/colors/B09495" style="background-color: #B09495" title="#B09495">#B09495</a>
                        </li>
                    </ul>
                </section>
            </section>

            <section>
                <section>
                    <h2>Usefulness</h2>
                    <ul>
                        <li class="fragment">Analysis Palette</li>
                        <li class="fragment">For Searching</li>
                        <li class="fragment">Sensitive Color Filter</li>
                        <li class="fragment">Grouping</li>
                        <li class="fragment">etc.</li>
                    </ul>
                </section>

                <section>
                    <h2>Who May Use It?</h2>
                    <ul>
                        <li class="fragment">Huaban</li>
                        <li class="fragment">UpYun</li>
                    </ul>
                </section>
            </section>

            <section>
                <h1>Algorithm</h1>
            </section>

            <section>
                <h2>Minimum Differ Algorithm</h2>
                <p>最小差值法</p>
            </section>

            <section>
                <p>It's Simple</p>
                <p>它很简单</p>
            </section>

            <style>
                #standard-256 {
                    line-height: 10px;
                    padding: 0;
                    margin: 0;
                }
                #standard-256 span {
                    width: 40px;
                    height: 20px;
                    display: inline-block;
                }
            </style>

            <section>
                <section>
                    <h3>Preparation</h3>
                    <p>You need a standard palette.</p>
                </section>

                <section>
                    <h4>An Example of Standard <a target="_blank" href="https://github.com/XadillaX/thmclrx/blob/1642b91809e270c8df269264aacc2eafed4a331c/lib/defaultPalette.js">256-Color Palette</a></h4>

                    <div id="standard-256"></div>
                </section>
            </section>

            <section>
                <section>
                    <h3>Steps</h3>
                    <ol>
                        <li class="fragment">Traverse all the pixels;</li>
                        <li class="fragment">For each pixels, calculate out differ for each standard
                            color;
                        </li>
                        <li class="fragment">A standard color with minimum differ is its standard color.</li>
                    </ol>
                </section>

                <section>
                    <h4>Example</h4>
                    <p class="fragment">
                        <span style="font-size: 14px; width: 60px; height: 30px; color: #fff; background: #ff7800; display: inline-block; margin: 0; padding: 0;">#FF7800</span>
                        ->
                        <span style="font-size: 14px; width: 60px; height: 30px; color: #fff; background: #ff9900; display: inline-block; margin: 0; padding: 0;">#FF9900</span>
                    </p>
                    <hr />
                    <ul style="font-family: 'fantasque sans mono';">
                        <li class="fragment"><strong>R:</strong> abs(0xFF - 0xFF) = 0</li>
                        <li class="fragment"><strong>G:</strong> abs(0x78 - 0x99) = 0x21 = 33</li>
                        <li class="fragment"><strong>B:</strong> abs(0x00 - 0x00) = 0</li>
                        <li class="fragment"><strong>Differ:</strong> 0 + 33 + 0 = 33</li>
                    </ul>
                </section>

                <section>
                    <h4>Be a Code Monkey</h4>
                    <pre><code data-trim contenteditable>
function calculate(pixel, standard) {
    return Math.abs(pixel.r - standard.r) +
        Math.abs(pixel.g - standard.g) +
        Math.abs(pixel.b - standard.b);
}

function minDiffer(pixel) {
    var minIdx = 0;
    var minDiff = calculate(pixel, palette[0]);
    for(var i = 1; i < palette.length; i++) {
        var temp = calculate(pixel, palette[i]);
        if(temp < minDiff) {
            minIdx = i;
            minDiff = temp;
        }
    }

    return palette[minIdx];
}</code></pre>
                </section>

                <section>
                    <h4>A Dobe of Code Monkey</h4>
                    <pre><code data-trim contenteditable>
var result = pixels.map(function(pixel) {
    return minDiffer(pixel);
});
                    </code></pre>
                </section>

                <section>
                    <h4>More Code ԅ(¯﹃¯ԅ)</h4>
                    <h5>摸口袋</h5>

                    <ul>
                        <li>
                            A <a href="https://github.com/XadillaX/theme-color-test/blob/master/version2/mindiff.js">Test Demo</a> for
                            minimum differ algorithm.
                        </li>
                        <li>
                            The <a href="https://github.com/XadillaX/thmclrx/blob/master/src/mindiffer.cpp">implement</a> of <strong>thmclrx</strong>
                        </li>
                    </ul>
                </section>

                <section>
                    <h4>优点 Advantages</h4>
                    <ul>
                        <li>算法简单粗暴易懂</li>
                        <li>易于归类和检索的实现</li>
                    </ul>
                </section>

                <section>
                    <h4>缺点 Disadvantages</h4>
                    <ul>
                        <li>色块较少，保真度低</li>
                        <li>如果要色块多的话，运营人员很累</li>
                    </ul>
                </section>
            </section>

            <section>
                <h2>Octree</h2>
                <p>八叉树剪枝合并法</p>
            </section>

            <section>
                <h2>Introduce to Octree</h2>
                <blockquote>
                    該算法最早見於 1988 年，M. Gervautz 和 W. Purgathofer 發表的論文《A Simple Method for Color Quantization:
                    Octree Quantization》當中。其時間複雜度和空間複雜度都有很大的優勢，並且保真度也是非常的高。
                </blockquote>
            </section>

            <section>
                <section>
                    <h3>Principle 原理</h3>
                    <p>
                        《圖片主題色提取算法小結》- <a target="_blank" href="http://xcoder.in/2014/09/17/theme-color-extract/#八叉樹提取法">Chapter 2.2</a>
                    </p>
                </section>

                <section>
                    <h4>What's Octree?</h4>
                    <img class="fragment" src="assets/octree1.png" />
                </section>

                <section>
                    <h4>Octree Stands for a 3D Space</h4>
                    <img src="assets/octree2.png" />
                </section>

                <section>
                    <h4>And... How About to Stands for a Color Space?</h4>
                    <small><a href="http://xcoder.in/2014/09/17/theme-color-extract/#八叉樹提取法">Click me ε٩(๑> ₃ <)۶з</a></small>
                </section>

                <section data-background="#ff7800">
                    <h1>0xFF7800</h1>
                </section>

                <section data-background="#773900">
                    <h2>Calculate</h2>
                    <h1 class="fragment" style="font-family: 'fantasque sans mono'; font-size: 50px;">0xFF = 1111 1111</h1>
                    <h1 class="fragment" style="font-family: 'fantasque sans mono'; font-size: 50px;">0x78 = 0111 1000</h1>
                    <h1 class="fragment" style="font-family: 'fantasque sans mono'; font-size: 50px;">0x00 = 0000 0000</h1>
                    <hr class="fragment" />
                    <h1 class="fragment" style="font-family: 'fantasque sans mono'; font-size: 50px;">Brch = 4666 6444</h1>
                </section>

                <section>
                    <h2>What's Meaning?</h2>
                    <ul>
                        <li class="fragment">根节点的第五个子节点</li>
                        <li class="fragment">的第七个子节点</li>
                        <li class="fragment">的第七个子节点</li>
                        <li class="fragment">的第七个子节点</li>
                        <li class="fragment">的第七个子节点</li>
                        <li class="fragment">的第五个子节点</li>
                        <li class="fragment">的第五个子节点</li>
                        <li class="fragment">的第五个子节点</li>
                    </ul>
                </section>
            </section>

            <section>
                <section>
                    <h4>Node Struct</h4>
                    <pre><code data-trim contenteditable>
var OctreeNode = function() {
    this.isLeaf = false;
    this.pixelCount = 0;
    this.red = 0;
    this.green = 0;
    this.blue = 0;

    this.children = new Array(8);
    for(var i = 0; i < this.children.length; i++) this.children[i] = null;

    // 這裏的 next 不是指兄弟鏈中的 next 指針
    // 而是在 reducible 鏈表中的下一個節點
    this.next = null;
};
                </code></pre>
                </section>

                <section>
                    <h4>Insert Node</h4>
                    <pre><code data-trim contenteditable>
function addColor(node, color, level) {
    if(node.isLeaf) {
        node.pixelCount++;
        node.red += color.r;
        node.green += color.g;
        node.blue += color.b;
    } else {
        // 由於 js 內部都是以浮點型存儲數值，所以位運算並沒有那麼高效
        // 在此使用直接轉換字符串的方式提取某一位的值
        //
        // 實際上如果用位運算來做的話就是這樣子的：
        //   https://github.com/XadillaX/thmclrx/blob/7ab4de9fce583e88da6a41b0e256e91c45a10f67/src/octree.cpp#L91-L103
        var str = "";
        var r = color.r.toString(2);
        var g = color.g.toString(2);
        var b = color.b.toString(2);
        while(r.length < 8) r = '0' + r;
        while(g.length < 8) g = '0' + g;
        while(b.length < 8) b = '0' + b;

        str += r[level];
        str += g[level];
        str += b[level];
        var idx = parseInt(str, 2);

        if(null === node.children[idx]) {
            node.children[idx] = createNode(node, idx, level + 1);
        }

        if(undefined === node.children[idx]) {
            console.log(color.r.toString(2));
        }

        addColor(node.children[idx], color, level + 1);
    }
}
                    </code></pre>
                </section>
            </section>

            <section>
                <section>
                    <h3>Merge Node</h3>
                    <p>当叶子节点数超载了，将把一些父节点下的所有叶子节点合并到父节点。</p>
                </section>

                <section>
                    <h2>Why Can?</h2>
                    <h3>你肿么能这样纸！？Σ(lliдﾟﾉ)ﾉ</h3>
                    <img src="assets/why-are-you-so-diao.jpg" />
                </section>

                <section>
                    <h4>Let's Do an Experiment</h4>
                    <h1>0xFF7800</h1>
                </section>

                <section>
                    <h2>0xFF7800</h2>
                    <blockquote>
                        R: 1111 1111
                        <br />G: 0111 1000
                        <br />B: 0000 0000
                        <br />
                    </blockquote>
                </section>

                <section>
                    <h2>0xFF7800's Brothers</h2>
                    <h4 style="color: #ff7800;">屎黄色の好基友 ╮(╯∀╰)╭</h4>
                    <blockquote>
                        R: 1111 111 (1/0)
                        <br />G: 0111 100 (1/0)
                        <br />B: 0000 000 (1/0)
                        <br />
                    </blockquote>
                </section>

                <section data-background="#000000">
                    <h2 style="color: #ff7800;">屎黄色家族某小分队</h2>
                    <blockquote>
                        <span style="color: #ff7800;">#FE7800</span>
                        <br>
                        <span style="color: #ff7801;">#FE7801</span>
                        <br>
                        <span style="color: #ff7900;">#FE7900</span>
                        <br>
                        <span style="color: #ff7901;">#FE7901</span>
                        <br>
                        <span style="color: #ff7810;">#FF7810</span>
                        <br>
                        <span style="color: #ff7811;">#FF7811</span>
                        <br>
                        <span style="color: #ff7910;">#FF7910</span>
                        <br>
                        <span style="color: #ff7911;">#FF7911</span>
                        <br>
                    </blockquote>
                </section>

                <section>
                    <img src="assets/why-are-you-so-diao2.jpg" />
                </section>
            </section>

            <section>
                <section>
                    <h4>Just Merge It</h4>
                    <h5>By Querying Reducible Linklist</h5>

                    <h7>从之前提到的“可幷链表数组”中找到层数最深的链表头节点进行合并。</h7>
                </section>

                <section>
                    <h4>从新建节点说起</h4>
                    <pre><code data-trim contenteditable>
function createNode(idx, level) {
    var node = new OctreeNode();
    if(level === 7) {
        node.isLeaf = true;
        leafNum++;
    } else {
        // 將其丟到第 level 層的 reducible 鏈表中
        node.next = reducible[level];
        reducible[level] = node;
    }

    return node;
}
                    </code></pre>
                </section>

                <section>
                    <h4>找最深（井冰）的可并节点  (΄◞ิ౪◟ิ‵)</h4>
                    <pre><code data-trim contenteditable>
// 找到最深層次的並且有可合併節點的鏈表
var lv = 6;
while(null === reducible[lv]) lv--;

// 取出鏈表頭並將其從鏈表中移除
var node = reducible[lv];
reducible[lv] = node.next;
                    </code></pre>
                </section>

                <section>
                    <h4>呐，都写到这里了，你要对人家负责…… (／‵Д′)／~ ╧╧</h4>

                    <pre style="background: url('assets/flandre.jpg') center;"><code class="fragment" data-trim contenteditable>
function reduceTree() {
    // 找到最深層次的並且有可合併節點的鏈表
    var lv = 6;
    while(null === reducible[lv]) lv--;

    // 取出鏈表頭並將其從鏈表中移除
    var node = reducible[lv];
    reducible[lv] = node.next;

    // 合併子節點
    var r = 0;
    var g = 0;
    var b = 0;
    var count = 0;
    for(var i = 0; i < 8; i++) {
        if(null === node.children[i]) continue;
        r += node.children[i].red;
        g += node.children[i].green;
        b += node.children[i].blue;
        count += node.children[i].pixelCount;
        leafNum--;
    }

    // 賦值
    node.isLeaf = true;
    node.red = r;
    node.green = g;
    node.blue = b;
    node.pixelCount = count;
    leafNum++;
}
                    </code></pre>
                </section>
            </section>

            <section>
                <section>
                    <h2>Start Building Octree</h2>

                    <pre class="fragment"><code data-trim>
for i : 0 -> pixels count do
    addColor(root, pixels -> i, 0)

    while leafNum > maxColors then
        reduceTree()
                    </code></pre>
                </section>

                <section>
                    <h4>想蒙混过关可是不对的呢。(◓Д◒)✄╰⋃╯</h4>
                    <pre style="background: white url('assets/2233.jpg') no-repeat;"><code data-trim class="fragment">
function buildOctree(pixels, maxColors) {
    for(var i = 0; i < pixels.length; i++) {
        // 添加顏色
        addColor(root, pixels[i], 0);

        // 合併葉子節點
        while(leafNum > maxColors) reduceTree();
    }
}
                    </code></pre>
                </section>
            </section>

            <section>
                <section>
                    <h2>终于到查询了</h2>
                    <img src="assets/flandre.gif" />
                </section>

                <section>
                    <h3>Process</h3>
                    <ol>
                        <li class="fragment">DFS from root node;</li>
                        <li>
                            <ol>
                                <li class="fragment">If it's not leaf, dive into children;</li>
                                <li class="fragment">Otherwise, calculate out value of this node.</li>
                            </ol>
                        </li>
                    </ol>
                </section>

                <section>
                    <h4>Cooooooooode it! *ଘ(੭*ˊᵕˋ)੭* ੈ✩‧₊˚</h4>
                    <pre><code trim-data>
function colorsStats(node, object) {
    if(node.isLeaf) {
        var r = parseInt(node.red / node.pixelCount).toString(16);
        var g = parseInt(node.green / node.pixelCount).toString(16);
        var b = parseInt(node.blue / node.pixelCount).toString(16);
        if(r.length === 1) r = '0' + r;
        if(g.length === 1) g = '0' + g;
        if(b.length === 1) b = '0' + b;

        var color = r + g + b;
        if(object[color]) object[color] += node.pixelCount;
        else object[color] = node.pixelCount;
        
        return;
    }

    for(var i = 0; i < 8; i++) {
        if(null !== node.children[i]) {
            colorsStats(node.children[i], object);
        }
    }
}
                    </code></pre>
                </section>

                <section>
                    <h2>Want Bit Operation</h2>
                    <h4>想用位运算？</h4>
                    <img src="assets/flandre2.jpg" />
                </section>

                <section>
                    <h4>成全你 (๑ơ ₃ ơ)♥</h4>
                    <pre><code data-trim>
/**
 * eg.
 *   R: 10101101
 *   G: 00101101
 *   B: 10010010
 *
 * idx: 50616616
 */
unsigned char r = (color->red >> (7 - level)) & 1;
unsigned char g = (color->green >> (7 - level)) & 1;
unsigned char b = (color->blue >> (7 - level)) & 1;

int idx = (r << 2) + (g << 1) + b;                
                    </code></pre>

                    <small><a href="https://github.com/XadillaX/thmclrx/blob/master/src/octree.cpp#L91" target="_blank">Refer Here</a></small>
                </section>

                <section>
                    <h2>But</h2>
                    <p>《<a href="http://www.ruanyifeng.com/blog/2010/01/12_javascript_syntax_structures_you_should_not_use.html"
                        target="_blank">12 种不宜使用的 Javascript 语法</a>》</p>
                    <small>阮一峰 / ฅ●ω●ฅ</small>
                </section>

                <section>
                    <h2>捌</h2>

                    <blockquote style="text-align: left;">
                        <p>这套运算符针对的是整数，所以对Javascript完全无用，因为Javascript内部，所有数字都保存为双精度浮点数。如果使用它们的话，Javascript不得不将运算数先转为整数，然后再进行运算，这样就降低了速度。而且"按位与运算符"&同"逻辑与运算符"&&，很容易混淆。</p>
                    </blockquote>
                </section>
            </section>

            <section>
                <section>
                    <h2>Demo Pictures for Octree</h2>
                </section>

                <script>
                    $(function()
                    {
                        $(".demo-color-wrapper").each(function()
                        {
                            var length = $(this).children().length;
                            var width = (50 + 5) * length;
                            var wrapWidth = $(this).width();

                            var left = (wrapWidth - width) /
                                2;
                            $(this).children().first().css(
                                "margin-left", left +
                                "px");
                            $(this).children().html("");
                        });
                    });
                </script>

                <section>
                    <img src="assets/demo1.jpg" />
                    <br />
                    <div class="demo-color-wrapper">
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #3f243f; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">258824</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #425bad; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">244864</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #ebeaf4; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">203897</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #b5283b; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">129567</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #6b90d0; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">73050</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #9ca3de; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">66014</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #af62b0; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">22675</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #d0a6ed; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">19093</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #b2c9e7; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">13200</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #e0a4a4; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">9855</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #f9caaf; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">5687</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #9d94a9; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">5293</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #a88877; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">197</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #d1917a; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">55</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #b7c3bc; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">6</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #70837c; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">3</div>
                    </div>
                </section>

                <section>
                    <img src="assets/demo2.jpg" />

                    <div class="demo-color-wrapper">
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #e7e4e0; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">190665</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #5abecc; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">73992</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #a96141; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">43882</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #98d2d7; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">43193</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #d0936a; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">22454</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #e1b09a; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">22331</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #aea6a3; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">15390</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #edccad; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">9317</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #6a3b26; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">5244</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #de6393; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">1008</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #dab5c6; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">755</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #157a8c; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">293</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #b5c3b6; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">152</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #afbcc1; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">123</div>
                        <div style="width: 50px; height: 21px; float: left; margin-right: 5px; margin-bottom: 5px; background: #728a0c; color: #fff; font-size: 12px; text-align: center; padding-top: 9px;">1</div>
                    </div>
                </section>
            </section>

            <section>
                <h2>Related</h2>

                <ul>
                    <li><a href="https://github.com/XadillaX/theme-color-test" target="_blank">Theme Color Extractor Demo</a>
                    </li>
                    <li><a href="https://github.com/XadillaX/thmclrx">thmclrx - A theme color extractor module for Node.js. (in C++)</a>
                    </li>
                    <li><a href="http://xcoder.in/2014/09/17/theme-color-extract/">圖片主題色提取算法小結</a>
                    </li>
                </ul>
            </section>

            <section>
                <h1>F.A.Q</h1>
                <h4>问题时间</h4>
                <img src="assets/flandre3.jpg" />
            </section>

            <section>
                <h1>! Fin</h1>
                <small><a href="mailto:i@2333.moe">XadillaX</a> <a href="http://huaban.com/">@Huaban</a> in 29/09/2014</small>
                <br />
                <small>Powered by <a href="https://github.com/hakimel/reveal.js" target="_blank">Reveal.js</a></small>
            </section>
        </div>
    </div>

    <script src="palette.js"></script>
    <script>
        $(function()
        {
            for (var i = 0; i < palette.length; i++)
            {
                var block = "<span style=\"background: rgba(" +
                    palette[i][0] + ", " + palette[i][1] + ", " +
                    palette[i][2] + ", 1);\"></span>";
                $("#standard-256").append(block);
            }
        });
    </script>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>
    <script>
        // Full list of configuration options available here:
         // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize(
        {
            controls: true,
            progress: true,
            history: true,
            center: true,

            theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
            transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

            // Parallax scrolling
            // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
            // parallaxBackgroundSize: '2100px 900px',

            // Optional libraries used to extend on reveal.js
            dependencies: [
            {
                src: 'lib/js/classList.js',
                condition: function()
                {
                    return !document.body.classList;
                }
            },
            {
                src: 'plugin/markdown/marked.js',
                condition: function()
                {
                    return !!document.querySelector(
                        '[data-markdown]');
                }
            },
            {
                src: 'plugin/markdown/markdown.js',
                condition: function()
                {
                    return !!document.querySelector(
                        '[data-markdown]');
                }
            },
            {
                src: 'plugin/highlight/highlight.js',
                async: true,
                callback: function()
                {
                    hljs.initHighlightingOnLoad();
                }
            },
            {
                src: 'plugin/zoom-js/zoom.js',
                async: true,
                condition: function()
                {
                    return !!document.body.classList;
                }
            },
            {
                src: 'plugin/notes/notes.js',
                async: true,
                condition: function()
                {
                    return !!document.body.classList;
                }
            }]
        });
    </script>
</body>

</html>
